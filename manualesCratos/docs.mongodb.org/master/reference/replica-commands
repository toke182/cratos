<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Replica Set Commands &mdash; MongoDB Manual</title>

    <link rel="shortcut icon" href="http://media.mongodb.org/favicon.ico" />
    <meta name="robots" content="index" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="canonical" href="http://docs.mongodb.org/master/reference/replica-commands" />

    
    
    <link rel="stylesheet" href="../../_static/mongodb-docs.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
      <link rel="search" type="application/opensearchdescription+xml" href="http://docs.mongodb.org/osd.xml" title="MongoDB Help"/>
<link rel="author" title="About these documents" href="../../about/" />
<link rel="top" title="MongoDB Manual" href="../../" />
<link rel="up" title="Replication" href="../../replication/" />
<link rel="next" title="Master Slave Replication" href="../../administration/master-slave/" />
<link rel="prev" title="Replica Set Features and Version Compatibility" href="../../release-notes/replica-set-features/" />
<!-- Put the following javascript before the closing </head> tag. -->
<script>
  (function() {
    var cx = '017213726194841070573:WMX6838984';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>
  </head>
  <body>
<div id="top-right">
        <div class="user-right">
                <ul id="header-menu-bar" class="ajs-menu-bar">
                <li class="normal"><a target="_blank" href="http://groups.google.com/group/mongodb-user">Forums</a></li>
                <li class="normal"><a target="_blank" href="http://blog.mongodb.org/">Blog</a></li>
                <li class="normal"><a href="http://www.mongodb.org/downloads">Download</a></li>
                <li class="normal"><a href="http://www.mongodb.org/display/DOCS/Drivers">Drivers</a></li>
                <li class="normal"><a href="http://www.mongodb.org/display/DOCS/Events">Events</a></li>
                <li class="normal last"><a class="last" href="http://www.mongodb.org/display/DOCS/International+Documentation">International</a></li>
                </ul>
        </div>
</div>
<div id="header-db" class="spread">
        <div class="split">
                <div id="logo">
                        <div><a href="../../"><img src="../../_static/logo-mongodb.png" width="190" height="55" alt="mongoDB" /></a></div>
                </div>
        </div>
<div class="search-db"><gcse:searchbox></gcse:searchbox></div>
<div id="etp">
<ul>
<li><a href="https://github.com/mongodb/docs/blob/master/source/reference/replica-commands.txt" target="_blank" title="Edit reference/replica-commands.txt on github">Edit this Page</a></li>
<li><a href="http://github.com/mongodb/docs" target="_blank" title="Fork the documentation on GitHub and contribute.">GitHub</a></li>
<li><a href="https://jira.mongodb.org/secure/CreateIssueDetails!init.jspa?pid=10380&issuetype=4&priority=4&summary=Comment+on%3a+%22reference/replica-commands%2Etxt%22" target="_blank" title="Report a problem with reference/replica-commands.txt on Jira">Report a problem</a></li>
</ul>
</div>
</div>  
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            <div id="cse-results"><gcse:searchresults></gcse:searchresults></div>
            
  <div class="section" id="replica-set-commands">
<h1>Replica Set Commands<a class="headerlink" href="#replica-set-commands" title="Permalink to this headline">¶</a></h1>
<p>This reference collects documentation for all <a class="reference internal" href="#replica-set-javascript-methods"><em>JavaScript methods</em></a> for the <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt> shell that
support <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a> functionality, as well as all
<a class="reference internal" href="#replica-set-database-commands"><em>database commands</em></a> related to
replication function.</p>
<p>See <a class="reference internal" href="../../replication/"><em>Replication</em></a>, for a list of all replica set documentation.</p>
<div class="section" id="javascript-methods">
<span id="replica-set-javascript-methods"></span><h2>JavaScript Methods<a class="headerlink" href="#javascript-methods" title="Permalink to this headline">¶</a></h2>
<p>The following methods apply to replica sets. For a complete list of all
methods, see <a class="reference internal" href="../method/"><em>JavaScript Methods</em></a>.</p>
<dl class="method">
<dt id="rs.status">
<tt class="descclassname">rs.</tt><tt class="descname">status</tt><big>(</big><big>)</big><a class="headerlink" href="#rs.status" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A <a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">document</em></a> with status information.</td>
</tr>
</tbody>
</table>
<p>This output reflects the current status of the replica set, using
data derived from the heartbeat packets sent by the other members
of the replica set.</p>
<p>This method provides a wrapper around the
<a class="reference internal" href="#replSetGetStatus" title="replSetGetStatus"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetGetStatus</span></tt></a> <a class="reference internal" href="../glossary/#term-database-command"><em class="xref std std-term">database command</em></a>.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">&#8220;<a class="reference internal" href="../replica-status/"><em>Replica Set Status Reference</em></a>&#8221; for documentation
of this output.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="db.isMaster">
<tt class="descclassname">db.</tt><tt class="descname">isMaster</tt><big>(</big><big>)</big><a class="headerlink" href="#db.isMaster" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a status document with fields that includes the
<tt class="docutils literal"><span class="pre">ismaster</span></tt> field that reports if the current node is the
<a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a> node, as well as a report of a subset of current
replica set configuration.</p>
<p>This function provides a wrapper around the <a class="reference internal" href="../glossary/#term-database-command"><em class="xref std std-term">database command</em></a>
<a class="reference internal" href="#isMaster" title="isMaster"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">isMaster</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="rs.initiate">
<tt class="descclassname">rs.</tt><tt class="descname">initiate</tt><big>(</big><em>configuration</em><big>)</big><a class="headerlink" href="#rs.initiate" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>configuration</strong> &#8211; Optional. A <a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">document</em></a> that specifies
the configuration of a replica
set. If not specified, MongoDB will
use a default configuration.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Initiates a replica set. Optionally takes a configuration argument
in the form of a <a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">document</em></a> that holds the configuration
of a replica set. Consider the following model of the most basic
configuration for a 3-member replica set:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="nx">_id</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">setname</span><span class="o">&gt;</span><span class="p">,</span>
     <span class="nx">members</span> <span class="o">:</span> <span class="p">[</span>
         <span class="p">{</span><span class="nx">_id</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">host</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">host0</span><span class="o">&gt;</span><span class="p">},</span>
         <span class="p">{</span><span class="nx">_id</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">host</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">host1</span><span class="o">&gt;</span><span class="p">},</span>
         <span class="p">{</span><span class="nx">_id</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">host</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">host2</span><span class="o">&gt;</span><span class="p">},</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This function provides a wrapper around the
&#8220;<a class="reference internal" href="#replSetInitiate" title="replSetInitiate"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetInitiate</span></tt></a>&#8221; <a class="reference internal" href="../glossary/#term-database-command"><em class="xref std std-term">database command</em></a>.</p>
</dd></dl>

<dl class="method">
<dt id="rs.conf">
<tt class="descclassname">rs.</tt><tt class="descname">conf</tt><big>(</big><big>)</big><a class="headerlink" href="#rs.conf" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a <a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">document</em></a> that contains the current
<a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a> configuration object.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rs.config">
<tt class="descclassname">rs.</tt><tt class="descname">config</tt><big>(</big><big>)</big><a class="headerlink" href="#rs.config" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#rs.config" title="rs.config"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.config()</span></tt></a> is an alias of <a class="reference internal" href="#rs.conf" title="rs.conf"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.conf()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="rs.reconfig">
<tt class="descclassname">rs.</tt><tt class="descname">reconfig</tt><big>(</big><em>configuration</em><span class="optional">[</span>, <em>force</em><span class="optional">]</span><big>)</big><a class="headerlink" href="#rs.reconfig" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>configuration</strong> &#8211; A <a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">document</em></a> that specifies
the configuration of a replica set.</li>
<li><strong>force</strong> &#8211; Optional. Specify <tt class="docutils literal"><span class="pre">{</span> <span class="pre">force:</span> <span class="pre">true</span> <span class="pre">}</span></tt> as the force
parameter to force the replica set to accept the new
configuration even if a majority of the members are
not accessible. Use with caution, as this can lead to
<a class="reference internal" href="../glossary/#term-rollback"><em class="xref std std-term">rollback</em></a> situations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Initializes a new <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a> configuration. This function
will disconnect the shell briefly and forces a reconnection as the
replica set renegotiates which node will be
<a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a>. As a result, the shell will display an error even
if this command succeeds.</p>
<p><a class="reference internal" href="#rs.reconfig" title="rs.reconfig"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> provides a wrapper around the
&#8220;<a class="reference internal" href="#replSetReconfig" title="replSetReconfig"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></tt></a>&#8221; <a class="reference internal" href="../glossary/#term-database-command"><em class="xref std std-term">database command</em></a>.</p>
<p><a class="reference internal" href="#rs.reconfig" title="rs.reconfig"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> overwrites the existing replica set
configuration. Retrieve the current configuration object with
<a class="reference internal" href="#rs.conf" title="rs.conf"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.conf()</span></tt></a>, modify the configuration as needed and then
use <a class="reference internal" href="#rs.reconfig" title="rs.reconfig"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> to submit the modified configuration
object.</p>
<p>To reconfigure a replica set, use the following sequence of
operations:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">conf</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">.</span><span class="nx">conf</span><span class="p">()</span>

<span class="c1">// modify conf to change configuration</span>

<span class="nx">rs</span><span class="p">.</span><span class="nx">reconfig</span><span class="p">(</span><span class="nx">conf</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to force the reconfiguration if a majority of the set
isn&#8217;t connected to the current member, or you&#8217;re issuing the
command against a secondary, use the following form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">conf</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">.</span><span class="nx">conf</span><span class="p">()</span>

<span class="c1">// modify conf to change configuration</span>

<span class="nx">rs</span><span class="p">.</span><span class="nx">reconfig</span><span class="p">(</span><span class="nx">conf</span><span class="p">,</span> <span class="p">{</span> <span class="nx">force</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Forcing a <a class="reference internal" href="#rs.reconfig" title="rs.reconfig"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> can lead to <a class="reference internal" href="../glossary/#term-rollback"><em class="xref std std-term">rollback</em></a>
situations and other difficult to recover from
situations. Exercise caution when using this option.</p>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">&#8220;<a class="reference internal" href="../replica-configuration/"><em>Replica Set Configuration</em></a>&#8221; and &#8220;<a class="reference internal" href="../../administration/replica-sets/"><em>Replica Set Administration</em></a>&#8221;.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="rs.add">
<tt class="descclassname">rs.</tt><tt class="descname">add</tt><big>(</big><em>hostspec</em>, <em>arbiterOnly</em><big>)</big><a class="headerlink" href="#rs.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify one of the following forms:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> (<em>string,document</em>) &#8211; Either a string or a document.  If a string, specifies a host
(and optionally port-number) for a new host member for the
replica set; MongoDB will add this host with the default
configuration. If a document, specifies any attributes about a
member of a replica set.</li>
<li><strong>arbiterOnly</strong> (<em>Boolean</em>) &#8211; Optional. If <tt class="docutils literal"><span class="pre">true</span></tt>, this host is an arbiter. If the second
argument evaluates to <tt class="docutils literal"><span class="pre">true</span></tt>, as is the case with some
<a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">documents</em></a>, then this instance will become an
arbiter.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Provides a simple method to add a member to an existing
<a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a>. You can specify new hosts in one of two ways:</p>
<ol class="arabic simple">
<li>as a &#8220;hostname&#8221; with an optional port number to use the default
configuration as in the <a class="reference internal" href="../../tutorial/expand-replica-set/#replica-set-add-member"><em>Add a Member to an Existing Replica Set</em></a> example.</li>
<li>as a configuration <a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">document</em></a>, as in the
<a class="reference internal" href="../../tutorial/expand-replica-set/#replica-set-add-member-alternate-procedure"><em>Add a Member to an Existing Replica Set (Alternate Procedure)</em></a> example.</li>
</ol>
<p>This function will disconnect the shell briefly and forces a
reconnection as the replica set renegotiates which node
will be <a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a>. As a result, the shell will display an
error even if this command succeeds.</p>
<p><a class="reference internal" href="#rs.add" title="rs.add"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.add()</span></tt></a> provides a wrapper around some of the
functionality of the &#8220;<a class="reference internal" href="#replSetReconfig" title="replSetReconfig"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></tt></a>&#8221; <a class="reference internal" href="../glossary/#term-database-command"><em class="xref std std-term">database
command</em></a> and the corresponding shell helper
<a class="reference internal" href="#rs.reconfig" title="rs.reconfig"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a>. See the <a class="reference internal" href="../replica-configuration/"><em>Replica Set Configuration</em></a>
document for full documentation of all replica set configuration
options.</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>To add a <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> accessible on the default port
<tt class="docutils literal"><span class="pre">27017</span></tt> running on the host <tt class="docutils literal"><span class="pre">mongodb3.example.net</span></tt>, use the
following <a class="reference internal" href="#rs.add" title="rs.add"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.add()</span></tt></a> invocation:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;mongodb3.example.net:27017&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">mongodb3.example.net</span></tt> is an arbiter, use the following form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;mongodb3.example.net:27017&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
</pre></div>
</div>
<p>To add <tt class="docutils literal"><span class="pre">mongodb3.example.net</span></tt> as a <a class="reference internal" href="../../administration/replica-sets/#replica-set-secondary-only-members"><em>secondary-only</em></a> member of set, use the
following form of <a class="reference internal" href="#rs.add" title="rs.add"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.add()</span></tt></a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="p">{</span> <span class="s2">&quot;host&quot;</span><span class="o">:</span> <span class="s2">&quot;mongodbd3.example.net:27017&quot;</span><span class="p">,</span> <span class="s2">&quot;priority&quot;</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
<p class="last">See the <a class="reference internal" href="../replica-configuration/"><em>Replica Set Configuration</em></a> and
<a class="reference internal" href="../../administration/replica-sets/"><em>Replica Set Administration</em></a> documents for more
information.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="rs.addArb">
<tt class="descclassname">rs.</tt><tt class="descname">addArb</tt><big>(</big><em>hostname</em><big>)</big><a class="headerlink" href="#rs.addArb" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> (<em>string</em>) &#8211; Specifies a host (and optionally port-number)
for a arbiter member for the replica set.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Adds a new <a class="reference internal" href="../glossary/#term-arbiter"><em class="xref std std-term">arbiter</em></a> to an existing replica set.</p>
<p>This function will disconnect the shell briefly and forces a
reconnection as the replica set renegotiates which node
will be <a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a>. As a result, the shell will display an
error even if this command succeeds.</p>
</dd></dl>

<dl class="method">
<dt id="rs.stepDown">
<tt class="descclassname">rs.</tt><tt class="descname">stepDown</tt><big>(</big><em>seconds</em><big>)</big><a class="headerlink" href="#rs.stepDown" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>seconds</strong> (<em>init</em>) &#8211; Specify the duration of this operation. If not
specified the command uses the default value
of 60 seconds.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">disconnects shell.</p>
</td>
</tr>
</tbody>
</table>
<p>Forces the current replica set member to step down as
<a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a> and then attempt to avoid election as primary for
the designated number of seconds. Produces an error if the current
node is not primary.</p>
<p>This function will disconnect the shell briefly and forces a
reconnection as the <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a> renegotiates which node
will be <a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a>. As a result, the shell will display an
error even if this command succeeds.</p>
<p><a class="reference internal" href="#rs.stepDown" title="rs.stepDown"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.stepDown()</span></tt></a> provides a wrapper around the
<a class="reference internal" href="../glossary/#term-database-command"><em class="xref std std-term">database command</em></a> <a class="reference internal" href="../command/replSetStepDown/#replSetStepDown" title="replSetStepDown"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetStepDown</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="rs.freeze">
<tt class="descclassname">rs.</tt><tt class="descname">freeze</tt><big>(</big><em>seconds</em><big>)</big><a class="headerlink" href="#rs.freeze" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>seconds</strong> (<em>init</em>) &#8211; Specify the duration of this operation.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Forces the current node to become ineligible to become primary for
the period specified.</p>
<p><a class="reference internal" href="#rs.freeze" title="rs.freeze"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.freeze()</span></tt></a> provides a wrapper around the <a class="reference internal" href="../glossary/#term-database-command"><em class="xref std std-term">database
command</em></a> <a class="reference internal" href="#replSetFreeze" title="replSetFreeze"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetFreeze</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="rs.remove">
<tt class="descclassname">rs.</tt><tt class="descname">remove</tt><big>(</big><em>hostname</em><big>)</big><a class="headerlink" href="#rs.remove" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>hostname</strong> &#8211; Specify one of the existing hosts to remove from
the current replica set.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Removes the node described by the <tt class="docutils literal"><span class="pre">hostname</span></tt> parameter from the
current <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a>. This function will disconnect the
shell briefly and forces a reconnection as the <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a>
renegotiates negotiates which node will be <a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a>. As a
result, the shell will display an error even if this command
succeeds.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Before running the <a class="reference internal" href="#rs.remove" title="rs.remove"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.remove()</span></tt></a> operation, you must <em>shut
down</em> the replica set member that you&#8217;re removing.</p>
<p class="last versionchanged">
<span class="versionmodified">Changed in version 2.2: </span>This procedure is no longer required when using
<a class="reference internal" href="#rs.remove" title="rs.remove"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.remove()</span></tt></a>, but it remains good practice.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="rs.slaveOk">
<tt class="descclassname">rs.</tt><tt class="descname">slaveOk</tt><big>(</big><big>)</big><a class="headerlink" href="#rs.slaveOk" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a shorthand for the following operation:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">getMongo</span><span class="p">().</span><span class="nx">setSlaveOk</span><span class="p">()</span>
</pre></div>
</div>
<p>This allows the current connection to allow read operations to run
on <a class="reference internal" href="../glossary/#term-secondary"><em class="xref std std-term">secondary</em></a> nodes. See the <a class="reference internal" href="../method/cursor.readPref/#cursor.readPref" title="cursor.readPref"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">readPref()</span></tt></a> method for more fine-grained control over
<a class="reference internal" href="../../applications/replication/#read-preference"><em>read preference</em></a> in the <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt> shell.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descclassname">db.</tt><tt class="descname">isMaster</tt><big>(</big><big>)</big></dt>
<dd><p>Returns a status document with fields that includes the
<tt class="docutils literal"><span class="pre">ismaster</span></tt> field that reports if the current node is the
<a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a> node, as well as a report of a subset of current
replica set configuration.</p>
<p>This function provides a wrapper around the <a class="reference internal" href="../glossary/#term-database-command"><em class="xref std std-term">database command</em></a>
<a class="reference internal" href="#isMaster" title="isMaster"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">isMaster</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="rs.help">
<tt class="descclassname">rs.</tt><tt class="descname">help</tt><big>(</big><big>)</big><a class="headerlink" href="#rs.help" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a basic help text for all of the <a class="reference internal" href="../../core/replication/"><em>replication</em></a> related shell functions.</p>
</dd></dl>

<dl class="method">
<dt id="rs.syncFrom">
<tt class="descclassname">rs.</tt><tt class="descname">syncFrom</tt><big>(</big><big>)</big><a class="headerlink" href="#rs.syncFrom" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 2.2.</span></p>
<p>Provides a wrapper around the <a class="reference internal" href="#replSetSyncFrom" title="replSetSyncFrom"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetSyncFrom</span></tt></a>, which
allows administrators to configure the member of a replica set that
the current member will pull data from. Specify the name of the
member you want to sync from in the form of <tt class="docutils literal"><span class="pre">[hostname]:[port]</span></tt>.</p>
<p>See <a class="reference internal" href="#replSetSyncFrom" title="replSetSyncFrom"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetSyncFrom</span></tt></a> for more details.</p>
</dd></dl>

</div>
<div class="section" id="database-commands">
<span id="replica-set-database-commands"></span><h2>Database Commands<a class="headerlink" href="#database-commands" title="Permalink to this headline">¶</a></h2>
<p>The following commands apply to replica sets. For a complete list of all
commands, see <a class="reference internal" href="../commands/"><em>Command Reference</em></a>.</p>
<dl class="dbcommand">
<dt id="isMaster">
<tt class="descname">isMaster</tt><a class="headerlink" href="#isMaster" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#isMaster" title="isMaster"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">isMaster</span></tt></a> command provides a basic overview of the current
replication configuration. MongoDB <a class="reference internal" href="../glossary/#term-driver"><em class="xref std std-term">drivers</em></a> and
<a class="reference internal" href="../glossary/#term-client"><em class="xref std std-term">clients</em></a> use this command to determine what kind of
member they&#8217;re connected to and to discover additional members of a
<a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a>. The <a class="reference internal" href="#db.isMaster" title="db.isMaster"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">db.isMaster()</span></tt></a> method provides a
wrapper around this database command.</p>
<p>The command takes the following form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">isMaster</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
<p>This command returns a <a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">document</em></a> containing the
following fields:</p>
<dl class="data">
<dt id="isMaster.setname">
<tt class="descclassname">isMaster.</tt><tt class="descname">setname</tt><a class="headerlink" href="#isMaster.setname" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the current replica set, if applicable.</p>
</dd></dl>

<dl class="data">
<dt id="isMaster.ismaster">
<tt class="descclassname">isMaster.</tt><tt class="descname">ismaster</tt><a class="headerlink" href="#isMaster.ismaster" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean value that reports when this node is writable. If
<tt class="docutils literal"><span class="pre">true</span></tt>, then the current node is either a <a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a>
node in a <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a>, a <a class="reference internal" href="../glossary/#term-master"><em class="xref std std-term">master</em></a> node in a
master-slave configuration, of a standalone <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt>.</p>
</dd></dl>

<dl class="data">
<dt id="isMaster.secondary">
<tt class="descclassname">isMaster.</tt><tt class="descname">secondary</tt><a class="headerlink" href="#isMaster.secondary" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean value that, when <tt class="docutils literal"><span class="pre">true</span></tt>, indicates that the
current node is a <a class="reference internal" href="../glossary/#term-secondary"><em class="xref std std-term">secondary</em></a> member of a <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica
set</em></a>.</p>
</dd></dl>

<dl class="data">
<dt id="isMaster.hosts">
<tt class="descclassname">isMaster.</tt><tt class="descname">hosts</tt><a class="headerlink" href="#isMaster.hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>An array of strings in the format of &#8220;<tt class="docutils literal"><span class="pre">[hostname]:[port]</span></tt>&#8221;
listing all nodes in the <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a> that are not
&#8220;<a class="reference internal" href="../glossary/#term-hidden-member"><em class="xref std std-term">hidden</em></a>&#8221;.</p>
</dd></dl>

<dl class="data">
<dt id="isMaster.primary">
<tt class="descclassname">isMaster.</tt><tt class="descname">primary</tt><a class="headerlink" href="#isMaster.primary" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="docutils literal"><span class="pre">[hostname]:[port]</span></tt> for the current
<a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica set</em></a> <a class="reference internal" href="../glossary/#term-primary"><em class="xref std std-term">primary</em></a>, if applicable.</p>
</dd></dl>

<dl class="data">
<dt id="isMaster.me">
<tt class="descclassname">isMaster.</tt><tt class="descname">me</tt><a class="headerlink" href="#isMaster.me" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="docutils literal"><span class="pre">[hostname]:[port]</span></tt> of the node responding to this
command.</p>
</dd></dl>

<dl class="data">
<dt id="isMaster.maxBsonObjectSize">
<tt class="descclassname">isMaster.</tt><tt class="descname">maxBsonObjectSize</tt><a class="headerlink" href="#isMaster.maxBsonObjectSize" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum permitted size of a <a class="reference internal" href="../glossary/#term-bson"><em class="xref std std-term">BSON</em></a> object in bytes for
this <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> process. If not provided, clients should
assume a max size of &#8220;4 * 1024 * 1024.&#8221;</p>
</dd></dl>

<dl class="data">
<dt id="isMaster.localTime">
<tt class="descclassname">isMaster.</tt><tt class="descname">localTime</tt><a class="headerlink" href="#isMaster.localTime" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 2.1.1.</span></p>
<p>Returns the local server time in UTC. This value is a
<a class="reference internal" href="../glossary/#term-isodate"><em class="xref std std-term">ISOdate</em></a>. You can use the <tt class="xref js js-func docutils literal"><span class="pre">toString()</span></tt>
JavaScript method to convert this value to a local date string,
as in the following example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">isMaster</span><span class="p">().</span><span class="nx">localTime</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="dbcommand">
<dt id="resync">
<tt class="descname">resync</tt><a class="headerlink" href="#resync" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#resync" title="resync"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">resync</span></tt></a> command forces an out-of-date slave
<tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> instance to re-synchronize itself. Note
that this command is relevant to master-slave replication only. It does
no apply to replica sets.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command obtains a global write lock and will block other
operations until it has completed.</p>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="replSetFreeze">
<tt class="descname">replSetFreeze</tt><a class="headerlink" href="#replSetFreeze" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#replSetFreeze" title="replSetFreeze"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetFreeze</span></tt></a> command prevents a replica set
member from seeking election for the specified number of
seconds. Use this command in conjunction with the
<a class="reference internal" href="../command/replSetStepDown/#replSetStepDown" title="replSetStepDown"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetStepDown</span></tt></a> command to make a different node in
the replica set a primary.</p>
<p>The <a class="reference internal" href="#replSetFreeze" title="replSetFreeze"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetFreeze</span></tt></a> command uses the following syntax:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">replSetFreeze</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">seconds</span><span class="o">&gt;</span> <span class="p">}</span>
</pre></div>
</div>
<p>If you want to unfreeze a replica set member before the specified number
of seconds has elapsed, you can issue the command with a seconds
value of <tt class="docutils literal"><span class="pre">0</span></tt>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">replSetFreeze</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span>
</pre></div>
</div>
<p>Restarting the <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> process also unfreezes a replica
set member.</p>
<p><a class="reference internal" href="#replSetFreeze" title="replSetFreeze"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetFreeze</span></tt></a> is an administrative command, and you
must issue the it against the <a class="reference internal" href="../glossary/#term-admin-database"><em class="xref std std-term">admin database</em></a>.</p>
</dd></dl>

<dl class="dbcommand">
<dt id="replSetGetStatus">
<tt class="descname">replSetGetStatus</tt><a class="headerlink" href="#replSetGetStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="docutils literal"><span class="pre">replSetGetStatus</span></tt> command returns the status of the replica
set from the point of view of the current server. You must run the
command against the <a class="reference internal" href="../glossary/#term-admin-database"><em class="xref std std-term">admin database</em></a>. The command has the following
prototype format:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">replSetGetStatus</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
<p>However, you can also run this command from the shell like so:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">status</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">&#8220;<a class="reference internal" href="../replica-status/"><em>Replica Set Status Reference</em></a>&#8221; and &#8220;<a class="reference internal" href="../../core/replication/"><em>Replication Fundamentals</em></a>&#8220;</p>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="replSetInitiate">
<tt class="descname">replSetInitiate</tt><a class="headerlink" href="#replSetInitiate" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#replSetInitiate" title="replSetInitiate"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetInitiate</span></tt></a> command initializes a new replica set. Use the
following syntax:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">replSetInitiate</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">config_document</span><span class="o">&gt;</span> <span class="p">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">&lt;config_document&gt;</span></tt> is a <a class="reference internal" href="../glossary/#term-document"><em class="xref std std-term">document</em></a> that specifies
the replica set&#8217;s configuration. For instance, here&#8217;s a config document
for creating a simple 3-member replica set:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="nx">_id</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">setname</span><span class="o">&gt;</span><span class="p">,</span>
     <span class="nx">members</span> <span class="o">:</span> <span class="p">[</span>
         <span class="p">{</span><span class="nx">_id</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">host</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">host0</span><span class="o">&gt;</span><span class="p">},</span>
         <span class="p">{</span><span class="nx">_id</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">host</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">host1</span><span class="o">&gt;</span><span class="p">},</span>
         <span class="p">{</span><span class="nx">_id</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">host</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">host2</span><span class="o">&gt;</span><span class="p">},</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>A typical way of running this command is to assign the config document to
a variable and then to pass the document to the
<a class="reference internal" href="#rs.initiate" title="rs.initiate"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.initiate()</span></tt></a> helper:</p>
<div class="highlight-javascript"><pre>  config = {
      _id : "my_replica_set",
       members : [
           {_id : 0, host : "rs1.example.net:27017"},
           {_id : 1, host : "rs2.example.net:27017"},
           {_id : 2, host : "rs3.example.net", arbiterOnly: true},
       ]
  }

  rs.initiate(config)

Notice that omitting the port cause the host to use the default port
of 27017. Notice also that you can specify other options in the config
documents such as the ``arbiterOnly`` setting in this example.</pre>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">&#8220;<a class="reference internal" href="../replica-configuration/"><em>Replica Set Configuration</em></a>,&#8221;
&#8220;<a class="reference internal" href="../../administration/replica-sets/"><em>Replica Set Administration</em></a>,&#8221; and &#8220;<a class="reference internal" href="../replica-configuration/#replica-set-reconfiguration-usage"><em>Replica Set
Reconfiguration</em></a>.&#8221;</p>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="replSetMaintenance">
<tt class="descname">replSetMaintenance</tt><a class="headerlink" href="#replSetMaintenance" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#replSetMaintenance" title="replSetMaintenance"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetMaintenance</span></tt></a> admin command enables or disables the
maintenance mode for a <a class="reference internal" href="../glossary/#term-secondary"><em class="xref std std-term">secondary</em></a> member of a <a class="reference internal" href="../glossary/#term-replica-set"><em class="xref std std-term">replica
set</em></a>.</p>
<p>The command has the following prototype form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">replSetMaintenance</span><span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span> <span class="p">}</span>
</pre></div>
</div>
<p>Consider the following behavior when running the
<a class="reference internal" href="#replSetMaintenance" title="replSetMaintenance"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetMaintenance</span></tt></a> command:</p>
<ul class="simple">
<li>You cannot run the command on the Primary.</li>
<li>You must run the command against the <tt class="docutils literal"><span class="pre">admin</span></tt> database.</li>
<li>When enabled <tt class="docutils literal"><span class="pre">replSetMaintenance:</span> <span class="pre">1</span></tt>, the member enters the
<tt class="docutils literal"><span class="pre">RECOVERING</span></tt> state. While the secondary is <tt class="docutils literal"><span class="pre">RECOVERING</span></tt>:<ul>
<li>The member is not accessible for read operations.</li>
<li>The member continues to sync its <a class="reference internal" href="../glossary/#term-oplog"><em class="xref std std-term">oplog</em></a> from the Primary.</li>
</ul>
</li>
</ul>
</dd></dl>

<dl class="dbcommand">
<dt id="replSetReconfig">
<tt class="descname">replSetReconfig</tt><a class="headerlink" href="#replSetReconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#replSetReconfig" title="replSetReconfig"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></tt></a> command modifies the configuration
of an existing replica set. You can use this command to add and
remove members, and to alter the options set on existing
members. Use the following syntax:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">replSetReconfig</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">new_config_document</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">force</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}</span>
</pre></div>
</div>
<p>You may also run the command using the shell&#8217;s <a class="reference internal" href="#rs.reconfig" title="rs.reconfig"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> method.</p>
<p>Be aware of the following <a class="reference internal" href="#replSetReconfig" title="replSetReconfig"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></tt></a> behaviors:</p>
<ul>
<li><p class="first">You must issue this command against the <a class="reference internal" href="../glossary/#term-admin-database"><em class="xref std std-term">admin database</em></a> of the current
primary member of the replica set.</p>
</li>
<li><p class="first">You can optionally force the replica set to accept the new
configuration by specifying <tt class="docutils literal"><span class="pre">force:</span> <span class="pre">true</span></tt>. Use this option if
the current member is not primary or if a majority of the members
of the set are not accessible.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Forcing the <a class="reference internal" href="#replSetReconfig" title="replSetReconfig"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></tt></a> command can lead to a
<a class="reference internal" href="../glossary/#term-rollback"><em class="xref std std-term">rollback</em></a> situation. Use with caution.</p>
</div>
<p>Use the force option to restore a replica set to new servers with
different hostnames. This works even if the set members already
have a copy of the data.</p>
</li>
<li><p class="first">A majority of the set&#8217;s members must be operational for the
changes to propagate properly.</p>
</li>
<li><p class="first">This command can cause downtime as the set renegotiates
primary-status. Typically this is 10-20 seconds, but could
be as long as a minute or more. Therefore, you should attempt
to reconfigure only during scheduled maintenance periods.</p>
</li>
<li><p class="first">In some cases, <a class="reference internal" href="#replSetReconfig" title="replSetReconfig"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></tt></a> forces the current
primary to step down, initiating an election for primary among
the members of the replica set. When this happens, the set will
drop all current connections.</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#replSetReconfig" title="replSetReconfig"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetReconfig</span></tt></a> obtains a special mutually
exclusive lock to prevent more than one
:dbcommand`replSetReconfig` operation from occurring at the same
time.</p>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="replSetSyncFrom">
<tt class="descname">replSetSyncFrom</tt><a class="headerlink" href="#replSetSyncFrom" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 2.2.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Options:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; Specifies the name and port number of the set member
that you want <em>this</em> member to sync from. Use
the <tt class="docutils literal"><span class="pre">[hostname]:[port]</span></tt> form.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#replSetSyncFrom" title="replSetSyncFrom"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetSyncFrom</span></tt></a> allows you to explicitly configure
which host the current <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> will poll <a class="reference internal" href="../glossary/#term-oplog"><em class="xref std std-term">oplog</em></a>
entries from. This operation may be useful for testing different
patterns and in situations where a set member is not syncing from
the host you want. The member to sync from must be a valid
source for data in the set; a member of a replica set cannot sync from:</p>
<ul class="simple">
<li>itself.</li>
<li>an arbiter, because arbiters do not hold data.</li>
<li>a member that does not build indexes.</li>
<li>an unreachable member.</li>
<li>a <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> instance that is not a member of the same
replica set.</li>
</ul>
<p>If you attempt to sync from a member that is more than 10 seconds
behind the current member, <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> will return and log a
warning, but <em>will</em> sync from such members.</p>
<p>The command has the following prototype form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">replSetSyncFrom</span><span class="o">:</span> <span class="s2">&quot;[hostname]:[port]&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>To run the command in the <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt> shell, use the following
invocation:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">adminCommand</span><span class="p">(</span> <span class="p">{</span> <span class="nx">replSetSyncFrom</span><span class="o">:</span> <span class="s2">&quot;[hostname]:[port]&quot;</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
<p>You may also use the <a class="reference internal" href="#rs.syncFrom" title="rs.syncFrom"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.syncFrom()</span></tt></a> helper in the
<tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt> shell, in an operation with the following form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">syncFrom</span><span class="p">(</span><span class="s2">&quot;[hostname]:[port]&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#replSetSyncFrom" title="replSetSyncFrom"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">replSetSyncFrom</span></tt></a> provides a temporary override of
default behavior. When you restart the <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt>
instance, if the connection that the <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> uses to
sync, the <tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt> will revert to the default logic for
selecting a sync source.</p>
</div>
</dd></dl>

</div>
</div>


<div id="btnv">
<ul id="btnvl">
<li id="btnvpr"><a href="../../release-notes/replica-set-features/" title="Previous Section: Replica Set Features and Version Compatibility">&lt; &nbsp; Replica Set Features and Version Compatibility</a></li>
<li id="btnvup"><a href="../../replication/" title="Parent Section: Replication" >&#47;&#92;&nbsp; Replication</a></li>
<li id="btnvnx"><a href="../../administration/master-slave/" title="Next Section: Master Slave Replication">Master Slave Replication &nbsp;&gt;</a></li>
</ul>
</div>
</div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">

<h3><a href="../../contents/">MongoDB Manual</a>
<small>(<a href="../../genindex/">Index</a>)</small>
</h3>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about/">About MongoDB Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/">Installing MongoDB</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../replication/">Replication</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../replication/#documentation">Documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../core/replication/">Replication Fundamentals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../administration/replica-sets/">Replica Set Administration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../administration/replication-architectures/">Replication Architectures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../applications/replication/">Application Development with Replica Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../core/replication-internals/">Replication Internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/replica-set-features/">Replica Set Features and Version Compatibility</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Replica Set Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#javascript-methods">JavaScript Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#database-commands">Database Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../administration/master-slave/">Master Slave Replication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../replication/#tutorials">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../replication/#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../sharding/">Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crud/">CRUD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aggregation/">Aggregation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../indexes/">Indexes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../applications/">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mongo/">Using the MongoDB Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../use-cases/">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../">Reference</a></li>
</ul>

<h3>Formats</h3>
<ul class="this-page-menu">
  <li><a href="/master/single/">MongoDB Manual, Single HTML Page</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.pdf" rel="nofollow">MongoDB Manual, PDF Format</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.epub" rel="nofollow">MongoDB Manual, ePub Format</a></li>
</ul>

<h3>Translations</h3>
<ul class="translation-menu">
  <li><a href="http://jp.docs.mongodb.org/master/reference/replica-commands" rel="nofollow">Japanese</a></li>
  <li><a href="http://cn.docs.mongodb.org/master/reference/replica-commands" rel="nofollow">Chinese</a></li>
  <!-- <li><a href="http://docs.mongodb.org/master/reference/replica-commands" rel="nofollow">English</a></li> -->
</ul>
<h3>Knowledge Base </h3>
<ul class="kb-menu">
  <li><a href="../../tutorial/">Tutorials</a></li>
  <li><a href="../../faq/">Frequently Asked Questions</a></li>
  <li><a href="../../use-cases/">Use Cases</a></li>
</ul><h3>MongoDB Wiki</h3>

<ul>
 <li><strong>Getting Started</strong>
   <ul>
     <!-- <li><a href="http://mongodb.org/display/DOCS/Quickstart">Quickstart</a></li> -->
     <li><a href="http://mongodb.org/display/DOCS/Introduction">Introduction</a></li>
     <li><a href="http://www.mongodb.org/downloads">Downloads</a></li>
     <!-- <li><a href="http://mongodb.org/display/DOCS/SQL+to+Mongo+Mapping+Chart">SQL to MongoDB Mapping</a></li> -->
   </ul>
 </li>
 <li><strong><a href="http://mongodb.org/display/DOCS/Developer+Zone">Developer Documentation</a></strong>
   <!-- <ul> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Connections">Connections</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Databases">Databases</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Collections">Collections</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Documents">Documents</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/GridFS">GridFS</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Indexes">Indexes</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Querying">Querying</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Aggregation">Aggregation</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Optimization">Optimization</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Inserting">Inserting</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Updating">Updating</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Removing">Removing</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/MapReduce">MapReduce</a></li> -->
   <!-- </ul> -->
 </li>
 <li><strong><a href="http://mongodb.org/display/DOCS/Admin+Zone">Administrative Documentation</a></strong>
   <ul>
     <!-- <li><a href="http://mongodb.org/display/DOCS/Components">Components</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Journaling">Journaling</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Production+Notes">Production Notes</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Replication">Replication</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Sharding">Sharding</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Monitoring+and+Diagnostics">Monitoring and Diagnostics</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Backups">Backups</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Durability+and+Repair">Durability and Repair</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Security+and+Authentication">Security and Authentication</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/Starting+and+Stopping+Mongo">Starting/Stopping MongoDB</a></li> -->
     <!-- <li><a href="http://mongodb.org/display/DOCS/GridFS+Tools">GridFS Tools</a></li> -->
     <li><a href="http://mongodb.org/display/DOCS/DBA+Operations+from+the+Shell">DB Operations from the Shell</a></li>
     <!-- <li><a href="http://mongodb.org/display/DOCS/Architecture+and+Components">Architecture and Components</a></li> -->
     <li><a href="http://mongodb.org/display/DOCS/Windows">Windows</a></li>
     <li><a href="http://mongodb.org/display/DOCS/Troubleshooting">Troubleshooting</a></li>
   </ul>
 </li>
 <li><strong><a href="http://www.mongodb.org/display/DOCS/Community">Community and Ecosystem</a></strong>
   <ul>
     <li><a href="http://10gen.com">10gen</a></li>
     <li><a href="http://www.mongodb.org/events">MongoDB Events</a></li>
     <li><a href="http://planet.mongodb.org">Planet MongoDB</a></li>
     <li><a href="http://mongodb.org/display/DOCS/MongoDB+Masters">MongoDB Masters</a></li>
     <li><a href="http://mongodb.org/display/DOCS/Slides+and+Video">Slides and Video</a></li>
     <!-- <li><a href="http://cookbook.mongodb.org/">Cookbook</a></li> -->
     <li><a href="http://mongodb.org/display/DOCS/Hosting+Center">Hosting Center</a></li>
     <li><a href="http://mms.10gen.com/">MongoDB Monitoring Service</a> (<a href="http://mms.10gen.com/help/">docs</a>)</li>
     <li><a href="http://mongodb.org/display/DOCS/Admin+UIs">Administrative Interfaces</a></li>
     <!-- <li><a href="http://mongodb.org/display/DOCS/International+Docs">International Documentation</a></li> -->
     <li><a href="http://10gen.com/books/">MongoDB Books</a></li>
   </ul>
 </li>
 <li><strong><a href="http://www.mongodb.org/display/DOCS/Drivers">Drivers</a></strong>
   <ul>
     <li>JavaScript (<a href="http://mongodb.org/display/DOCS/Javascript+Language+Center">wiki</a>, <a href="http://api.mongodb.org/js/current">docs</a>)</li>
     <li>Python (<a href="http://mongodb.org/display/DOCS/Python+Language+Center">wiki</a>, <a href="http://api.mongodb.org/python/current">docs</a>)</li>
     <li>Ruby (<a href="http://mongodb.org/display/DOCS/Ruby+Language+Center">wiki</a>, <a href="http://api.mongodb.org/ruby/current">docs</a>)</li>
     <li>PHP (<a href="http://mongodb.org/display/DOCS/PHP+Language+Center">wiki</a>, <a href="http://php.net/mongo/">docs</a>)</li>
     <li>Perl (<a href="http://mongodb.org/display/DOCS/Perl+Language+Center">wiki</a>, <a href="http://api.mongodb.org/perl/current/">docs</a>)</li>
     <li>Java (<a href="http://mongodb.org/display/DOCS/Java+Language+Center">wiki</a>, <a href="http://api.mongodb.org/java/current">docs</a>)</li>
     <li>Scala (<a href="http://mongodb.org/display/DOCS/Scala+Language+Center">wiki</a>, <a href="http://api.mongodb.org/scala/casbah/current/">docs</a>)</li>
     <li>C# (<a href="http://mongodb.org/display/DOCS/CSharp+Language+Center">wiki</a>, <a href="http://api.mongodb.org/csharp/current/">docs</a>)</li>
     <li>C (<a href="http://mongodb.org/display/DOCS/C+Language+Center">wiki</a>, <a href="http://api.mongodb.org/c/current/">docs</a>)</li>
     <li>C++ (<a href="http://mongodb.org/pages/viewpage.action?pageId=133409">wiki</a>, <a href="http://api.mongodb.org/cplusplus/current/">docs</a>)</li>
     <li>Haskell (<a href="http://mongodb.org/display/DOCS/Haskell+Language+Center">wiki</a>, <a href="http://api.mongodb.org/haskell">docs</a>)</li>
     <li>Erlang (<a href="http://mongodb.org/display/DOCS/Erlang+Language+Center">wiki</a>, <a href="http://api.mongodb.org/erlang">docs</a>)</li>
   </ul>
 </li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
        &copy; Copyright 2011-2012, 10gen, Inc.  Licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons</a>.

    <p>MongoDB&reg;, Mongo&reg;, and the leaf logo are registered trademarks of 10gen, Inc.</p>
    <p>The MongoDB Documentation Project uses <a href="https://github.com/mongodb/docs">GitHub</a>. Fork the repository and submit pull requests to contribute.</p>
    <p>If you find any issues with the documentation feel free to open a <a href="http://jira.mongodb.org/browse/DOCS">Jira Case</a> and we'll work to resolve it promptly.</p>

  </div><script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
_gaq.push(['_setAccount', 'UA-7301842-8']);
_gaq.push(['_setDomainName', 'docs.mongodb.org']);
_gaq.push(['_trackPageview']);
(function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
        })();
</script>

<script type="text/javascript">
document.write(unescape("%3Cscript src='" + document.location.protocol + "//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>try { mktoMunchkin("017-HGS-593"); } catch(e) {}</script>
  </body>
</html>